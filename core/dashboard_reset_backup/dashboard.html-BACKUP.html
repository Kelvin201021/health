{% extends "base.html" %}
{% block title %}Dashboard - Hypertension System{% endblock %}

{% block content %}
<div class="row justify-content-center">
  <div class="col-md-10">
    <div class="card p-4">

      <!-- Header -->
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h2 class="mb-0">Dashboard</h2>
        <small class="text-muted">Welcome, {{ user.username }}</small>
      </div>

      <div class="row">

        <!-- Latest BP Panel -->
        <div class="col-lg-6">
          <div class="card p-3 mb-3">
            <h4 class="mb-3">Latest Blood Pressure</h4>

            {% if latest %}
            <div class="p-3 border rounded bg-light shadow-sm">

              <!-- Big BP Numbers -->
              <div class="display-5 fw-bold text-center">
                {{ latest.systolic }}/{{ latest.diastolic }} mmHg
              </div>

              <!-- Timestamp -->
              <p class="text-muted text-center mb-2">
                Recorded: {{ latest.recorded_at|date:"Y-m-d H:i" }}
              </p>

              <!-- Stage Badge -->
              {% if stage %}
              <div class="text-center mb-2">
                <span class="badge bg-{{ stage.1 }} p-2" style="font-size:1.15rem;">
                  {{ stage.0 }}
                </span>
              </div>
              {% endif %}

              <!-- Elder-Friendly Advice -->
              {% if advice %}
              <p class="mt-3 text-center fs-5">
                <strong>Advice:</strong> {{ advice }}
              </p>
              {% endif %}

              <!-- Buttons -->
              <div class="text-center mt-4">
                <a href="{% url 'hypertension:bp_list' %}"
                   class="btn btn-outline-primary btn-lg me-2">
                  View All Readings
                </a>

                <a href="{% url 'hypertension:bp_create' %}"
                   class="btn btn-primary btn-lg">
                  Add Reading
                </a>
              </div>

            </div>

            {% else %}
            <!-- No readings yet -->
            <div class="text-center p-4 border rounded bg-light shadow-sm">
              <p class="mb-3 fs-5 text-muted">
                No readings yet â€” please add your first one.
              </p>

              <a href="{% url 'hypertension:bp_create' %}"
                 class="btn btn-primary btn-lg">
                Add Your First Reading
              </a>
            </div>
            {% endif %}
          </div>
        </div>

        <!-- Quick Links Panel -->
        <div class="col-lg-6">
          <div class="card p-3 mb-3">
            <h4 class="mb-3">Quick Links</h4>
            <ul class="list-unstyled fs-5">
              <li class="mb-2">
                <a href="{% url 'hypertension:bp_list' %}">ğŸ“Š View all readings</a>
              </li>
              <li class="mb-2">
                <a href="{% url 'hypertension:bp_create' %}">â• Add new blood pressure</a>
              </li>
              <li class="mb-2">
                <a href="{% url 'logout' %}">ğŸšª Logout</a>
              </li>
            </ul>
          </div>

          <!-- DASHBOARD TILES -->
          <div class="mt-3">
            <h5 class="mb-2">Quick Access</h5>

            <div class="row g-3">

              <!-- Tile 1 -->
              <div class="col-6 col-md-6">
                <a href="{% url 'hypertension:bp_list' %}"
                   class="tile large-tile d-block text-decoration-none text-dark text-center p-3 rounded">
                  <div style="font-size:2rem;">ğŸ©¸</div>
                  <div class="mt-2 fw-bold">Blood Pressure</div>
                  <div class="small text-muted">View readings & charts</div>
                </a>
              </div>

              <!-- Tile 2 -->
              <div class="col-6 col-md-6">
                <a href="#"
                   class="tile large-tile d-block text-decoration-none text-dark text-center p-3 rounded">
                  <div style="font-size:2rem;">ğŸ’Š</div>
                  <div class="mt-2 fw-bold">Medications</div>
                  <div class="small text-muted">Your meds & reminders</div>
                </a>
              </div>

              <!-- Tile 3 -->
              <div class="col-6 col-md-6">
                <a href="#"
                   class="tile large-tile d-block text-decoration-none text-dark text-center p-3 rounded">
                  <div style="font-size:2rem;">ğŸ§‚</div>
                  <div class="mt-2 fw-bold">Salt Intake</div>
                  <div class="small text-muted">Daily salt tracker</div>
                </a>
              </div>

              <!-- Tile 4 -->
              <div class="col-6 col-md-6">
                <a href="#"
                   class="tile large-tile d-block text-decoration-none text-dark text-center p-3 rounded">
                  <div style="font-size:2rem;">ğŸ½ï¸</div>
                  <div class="mt-2 fw-bold">My Food Today</div>
                  <div class="small text-muted">Log meals</div>
                </a>
              </div>

              <!-- Tile 5 -->
              <div class="col-6 col-md-6">
                <a href="#"
                   class="tile large-tile d-block text-decoration-none text-dark text-center p-3 rounded">
                  <div style="font-size:2rem;">ğŸ•’</div>
                  <div class="mt-2 fw-bold">Spoon & Watch</div>
                  <div class="small text-muted">Device connection</div>
                </a>
              </div>

              <!-- Tile 6 -->
              <div class="col-6 col-md-6">
                <a href="#"
                   class="tile large-tile d-block text-decoration-none text-dark text-center p-3 rounded">
                  <div style="font-size:2rem;">ğŸ””</div>
                  <div class="mt-2 fw-bold">Reminders</div>
                  <div class="small text-muted">Medication & checkups</div>
                </a>
              </div>

            </div>
          </div>

        </div>
      </div>

      <!-- Footer Note -->
      <div class="mt-3 text-muted small">
        Your dashboard will show trends, weekly reports, risk alerts and medication reminders soon.
      </div>

    </div>
  </div>
</div>
{% endblock %}
